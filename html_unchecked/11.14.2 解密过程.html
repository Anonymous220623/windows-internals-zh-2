<h3 class="bt3" id="sigil_toc_id_290">11.14.2　解密过程</h3>
<p class="zw">当应用程序访问被加密的文件时，将发生如下解密过程。</p>
<p class="zw">1）NTFS识别到文件被加密，向EFS驱动程序发出一个请求。</p>
<p class="zw">2）EFS驱动程序检索DDF并将其传递给EFS服务。</p>
<p class="zw">3）EFS服务从用户配置文件检索用户的私钥，并用私钥解密DDF以获得FEK。</p>
<p class="zw">4）EFS服务将FEK回传给EFS驱动程序。</p>
<p class="zw">5）EFS驱动程序使用FEK解密文件中应用程序需要访问的部分。</p>
<table> 
 <tbody> 
  <tr> 
   <td style="vertical-align:top;border:none;"> <p class="cxtu"><img src="https://cdn.ptpress.cn/pubcloud/5B0A982E/ushu/UBda647ada3435/online/FBOLda82494f5f9f/Images/tu.png" style=""></p> </td> 
   <td style="vertical-align:top;border:none;"> <p class="zwzy"><strong style="color:#0092dd">注意</strong>　当应用程序打开文件时，只会对文件中应用程序需要的那部分数据进行解密，因为EFS使用了加密块链接（Cipher Block Chaining）。如果用户移除文件的加密特性，此时的行为将有所不同，那么整个文件都会被解密并重写为明文形式。</p> </td> 
  </tr> 
 </tbody> 
</table>
<p class="zw">6）EFS驱动程序将解密后的数据返回给NTFS，NTFS将其发送给发出请求的应用程序。</p>

<p class="epubit-contents-id" style="display: none">{"index":1,"parentId":"8e765ccd-1733-46fe-b48f-23c09944a7ed","id":"d9d8c91d-227c-45f1-b0a3-1dba53684fae"}</p>