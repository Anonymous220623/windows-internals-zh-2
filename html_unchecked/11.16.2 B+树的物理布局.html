<h3 class="bt3" id="sigil_toc_id_307">11.16.2　B+树的物理布局</h3>
<p class="zw">Minstore中的B+树由桶（Bucket）组成。这种桶类似于常规的B+树节点。叶桶包含树正在存储的数据，中间桶称为引导者（Director）节点，只用于直接查找树的下一级（在图11-79中，每个节点都是一个桶）。由于引导者节点只用于将流量引导至子桶，因此无须具备子桶中键的相同副本，只需要在两个桶中选择一个值来使用（在ReFS中，键通常是压缩后的文件名）。中间桶的数据则包含逻辑簇号（LCN）和所指向的桶的校验值（校验值使得ReFS能够实现自治愈功能）。Minstore表的中间节点可以视为一种默克尔树（Merkle Tree），其中每个叶节点都以数据块的哈希值作为标签，而每个非叶节点都以自己的子节点标签的哈希值作为标签。</p>
<p class="zw">每个桶都由一个索引头和一个索引脚组成，其中索引头描述了该桶，而索引脚则是一个按照正确的顺序指向索引项的偏移量数组。在索引头和索引脚之间则是索引项。一个索引项代表B+表中的一行；每一行都是一种简单的数据结构，提供了键和数据的位置和大小信息（位于同一个桶中）。图11-80展示了一个包含三行的叶桶的范例，这些行都使用位于索引脚的偏移量进行索引。在叶页中，每一行都包含了键和实际数据（或另一个嵌入式树的根节点）。</p>
<p class="图"></p>
<img src="../res/pubcloud/5B0A982E/ushu/UBda647ada3435/online/FBOLda82494f5f9f/Images/tx3257.png" style="width: 100%" />
<p class="图题">图11-80　包含三个索引项的叶桶，按照索引脚中的偏移量数组进行排序</p>

<p class="epubit-contents-id" style="display: none">{"index":1,"parentId":"4bbec909-3cd8-4eac-81f1-9dd5481ba72c","id":"7c17f5c9-920e-452b-b17a-5482620917a0"}</p>